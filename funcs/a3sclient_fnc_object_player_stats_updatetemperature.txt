{
	private _fnc_scriptNameParent = if (isNil '_fnc_scriptName') then {'A3SClient_fnc_object_player_stats_updateTemperature'} else {_fnc_scriptName};
	private _fnc_scriptName = 'A3SClient_fnc_object_player_stats_updateTemperature';
	scriptName _fnc_scriptName;

#line 1 "A3S_client\bin\scripts\effects\fn_object_player_stats_updateTemperature.sqf [A3SClient_fnc_object_player_stats_updateTemperature]"

scriptName"fn_object_player_stats_updateTemperature";private["_timeElapsed","_forcedBodyTemperatureChangePerMinute","_wetnessChangePerMinute","_altitude","_isSwimming","_temperatureConfig","_fromDayTimeTemperature","_toDayTimeTemperature","_environmentTemperature","_isFireNearby","_startPosition","_endPosition","_intersections","_isBelowRoof","_clothingColdProtection","_movementInfluence","_regulation","_environmentInfluence"];_timeElapsed=_this;_forcedBodyTemperatureChangePerMinute=0;_wetnessChangePerMinute=-0.1;_altitude=((getPosASL player) select 2) max 0;if(_altitude>150) then{_altitude=_altitude*2.2;};_isSwimming=(_altitude<0.1)||(underwater player);_temperatureConfig=missionConfigFile>>"CfgEnvironment">>worldName>>"Temperature";_fromDayTimeTemperature=(getArray(_temperatureConfig>>"daytimeTemperature")) select(date select 3);_toDayTimeTemperature=(getArray(_temperatureConfig>>"daytimeTemperature")) select((date select 3)+1);_environmentTemperature=[_fromDayTimeTemperature,_toDayTimeTemperature,(date select 4)/60]call A3SClient_fnc_util_math_lerp;_environmentTemperature=_environmentTemperature+overcast*(getNumber(_temperatureConfig>>"overcast"));_environmentTemperature=_environmentTemperature+rain*(getNumber(_temperatureConfig>>"rain"));_environmentTemperature=_environmentTemperature+windStr*(getNumber(_temperatureConfig>>"wind"));_environmentTemperature=_environmentTemperature+_altitude/100*(getNumber(_temperatureConfig>>"altitude"));if(_isSwimming) then{_environmentTemperature=_environmentTemperature+(getNumber(_temperatureConfig>>"water"));};a3s_ClientEnvironmentTemperature=_environmentTemperature;if!((vehicle player) isEqualTo player) then{if(isEngineOn(vehicle player)) then {_forcedBodyTemperatureChangePerMinute=0.5;_wetnessChangePerMinute=-0.5;}else {_forcedBodyTemperatureChangePerMinute=0.1;
_wetnessChangePerMinute=-0.2;};}else{if(_isSwimming) then {_wetnessChangePerMinute=99999;}else {_isFireNearby=[ASLtoAGL(getPosASL player),6]call A3SClient_fnc_util_world_isFireInRange;if(_isFireNearby) then {_forcedBodyTemperatureChangePerMinute=1;_wetnessChangePerMinute=-0.5;}else {if(rain>0.1) then {_startPosition=getPosASL player;_endPosition=[_startPosition select 0,_startPosition select 1,(_startPosition select 2)+10];_intersections=lineIntersectsSurfaces[_startPosition,_endPosition,player,objNull,false,1,"GEOM","VIEW"];_isBelowRoof=!(_intersections isEqualTo[]);if!(_isBelowRoof) then {_wetnessChangePerMinute=rain;};};};};};a3s_Wetness=((a3s_Wetness+_wetnessChangePerMinute/60*_timeElapsed) max 0) min 2;if(a3s_ClientEnvironmentTemperature>25) then{_forcedBodyTemperatureChangePerMinute=0.5;};if(_forcedBodyTemperatureChangePerMinute>0) then{a3s_Temperature=a3s_Temperature+_forcedBodyTemperatureChangePerMinute/60*_timeElapsed;}else{_clothingColdProtection=0;if!((uniform player) isEqualTo"") then {_clothingColdProtection=_clothingColdProtection+0.25;};if!((headgear player) isEqualTo"") then {_clothingColdProtection=_clothingColdProtection+0.50;};if!((vest player) isEqualTo"") then {_clothingColdProtection=_clothingColdProtection+0.80;};_clothingColdProtection=((_clothingColdProtection*(1-(a3s_Wetness*0.5))) max 0) min 1;_movementInfluence=0;if((getPos player) select 2<0.1) then {_movementInfluence=(37-a3s_Temperature)*(1-(a3s_Wetness*0.5))*0.117*(vectorMagnitude(velocity player))/6.4;};if(a3s_Temperature<37) then {_regulation=0.1;}else {_regulation=-0.1;};_environmentInfluence=(1-_clothingColdProtection)*(-0.2+0.008*a3s_ClientEnvironmentTemperature);a3s_Temperature=a3s_Temperature+(_regulation+_movementInfluence+_environmentInfluence)/60*_timeElapsed;a3s_Temperature=round(a3s_Temperature*(10 ^ 2))/(10 ^ 2);};a3s_Temperature=a3s_Temperature min 37;if(a3s_Temperature<35.8) then{addCamShake[0.7,7,30];if(a3s_Temperature<35.3) then{[3.5]spawn A3SClient_fnc_infectMe;};};
}