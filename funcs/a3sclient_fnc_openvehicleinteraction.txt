{
	private _fnc_scriptNameParent = if (isNil '_fnc_scriptName') then {'A3SClient_fnc_openVehicleInteraction'} else {_fnc_scriptName};
	private _fnc_scriptName = 'A3SClient_fnc_openVehicleInteraction';
	scriptName _fnc_scriptName;

#line 1 "A3S_client\bin\scripts\interaction\vinteraction\fn_openVehicleInteraction.sqf [A3SClient_fnc_openVehicleInteraction]"

scriptName"fn_openVehicleInteraction";if(!a3s_Alive) exitWith{};if(a3s_inAction) exitWith{};if(!alive cursorTarget) exitWith{};private["_display","_hitPoints","_btn","_i"];a3s_cursorTarget=cursorTarget;if(!(a3s_cursorTarget isKindOf"LandVehicle") AND!(a3s_cursorTarget isKindOf"Air") AND!(a3s_cursorTarget isKindOf"Ship")) exitWith{};closeDialog 0;disableSerialization;if(!dialog) then{createDialog"interactionMenu";};_display=findDisplay 600;uiNamespace setVariable["a3s_interactionMenu_btn0",_display displayCtrl 0];uiNamespace setVariable["a3s_interactionMenu_btn1",_display displayCtrl 10];uiNamespace setVariable["a3s_interactionMenu_btn2",_display displayCtrl 20];uiNamespace setVariable["a3s_interactionMenu_btn3",_display displayCtrl 30];uiNamespace setVariable["a3s_interactionMenu_btn4",_display displayCtrl 40];uiNamespace setVariable["a3s_interactionMenu_btn5",_display displayCtrl 50];uiNamespace setVariable["a3s_interactionMenu_btn6",_display displayCtrl 60];uiNamespace setVariable["a3s_interactionMenu_btn7",_display displayCtrl 70];uiNamespace setVariable["a3s_interactionMenu_btn8",_display displayCtrl 80];_vehicles=["KI_Car_Gurkha_rpv_Cargo_Upgrade","KI_Car_Gurkha_rpv"];_BtnUpgrade=_display displayCtrl 110;_BtnReinforce=_display displayCtrl 120;if((typeOf a3s_cursorTarget) in _vehicles) then{_BtnUpgrade ctrlEnable true;_BtnReinforce ctrlEnable true;if((typeof a3s_cursorTarget) isEqualTo"KI_Car_Gurkha_rpv_Cargo_Upgrade") then{_BtnUpgrade buttonSetAction"[""<t color='#ffff00'>Already upgraded...</t>""] call A3SClient_fnc_addToFeed;";
}else{_BtnUpgrade buttonSetAction"[0] spawn A3SClient_fnc_upgrage_vehicle;";};if((a3s_cursorTarget animationPhase"Stage2_Hide") isEqualTo 1) then{_BtnReinforce buttonSetAction"[""<t color='#ffff00'>Already reinforced...</t>""] call A3SClient_fnc_addToFeed;";}else{_BtnReinforce buttonSetAction"[1] spawn A3SClient_fnc_upgrage_vehicle;";};}else{_BtnUpgrade buttonSetAction"[""<t color='#ffff00'>This vehicle cannot be upgraded</t>""] call A3SClient_fnc_addToFeed;";_BtnReinforce buttonSetAction"[""<t color='#ffff00'>This vehicle cannot be reinforced</t>""] call A3SClient_fnc_addToFeed;";};[a3s_cursorTarget]remoteExecCall["A3SServer_fnc_saveVehicle",2];_hitPoints=[];{if((_x select 0) isEqualTo(typeOf a3s_cursorTarget)) then{_hitPoints=(_x select 1);};}forEach a3s_sv_vehicleHitPoints;if(count _hitPoints isEqualTo 0) then{_hitPoints=a3s_sv_vehicleHitPointsDefault;};for"_i"from 0 to 8 step 1 do{_btn=uiNamespace getVariable format["a3s_interactionMenu_btn%1",_i];_hitPoint=[_hitPoints,_i,""]call BIS_FNC_PARAM;if(_hitPoint!=""AND _hitPoint!="NOENTRY") then{if(a3s_cursorTarget getHitPointDamage _hitPoint isEqualTo 0) then{_btn ctrlSetText format["%1 repaired",[_hitPoint]call A3SClient_fnc_getPartName];_btn ctrlEnable false;}else{_hitPointDmg=round((a3s_cursorTarget getHitPointDamage _hitPoint)*100);_btn ctrlSetText format["[%2%3] Repair %1",[_hitPoint]call A3SClient_fnc_getPartName,_hitPointDmg,"%"];};}else{_btn ctrlshow false;_btn ctrlEnable false;};};
}