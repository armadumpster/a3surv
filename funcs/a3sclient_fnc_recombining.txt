{
	private _fnc_scriptNameParent = if (isNil '_fnc_scriptName') then {'A3SClient_fnc_recombining'} else {_fnc_scriptName};
	private _fnc_scriptName = 'A3SClient_fnc_recombining';
	scriptName _fnc_scriptName;

#line 1 "A3S_client\bin\scripts\interaction\pinteraction\fn_recombining.sqf [A3SClient_fnc_recombining]"

scriptName"fn_recombining";setMousePosition[0.5,0.5];_result=["Do you really want to recombining your magazines?","Recombining Magazines?","Yes","No"]call BIS_fnc_guiMessage;waitUntil{uiSleep 0.05;!isNil"_result"};if(_result) then{a3s_inAction=true;_itemsPlayer=(vestItems player)+(backpackITems player)+(uniformItems player);if!("A3S_Item_Speedloader"in _itemsPlayer) then{["<t color='#A3FB26'>I am recombining my magazines without a speedloader...</t>"]call A3SClient_fnc_addToFeed;player playMoveNow"AinvPknlMstpSnonWnonDnon_medic_1";uisleep 3;waitUntil{(animationState player)!="AinvPknlMstpSnonWnonDnon_medic_1"};uisleep 0.5;player playMoveNow"AinvPknlMstpSnonWnonDnon_medic_1";uisleep 4;a3s_inAction=false;_magInfo=magazinesAmmoFull player;_curMag=currentMagazine player;_bulletCount=0;{if((_x select 0) isEqualTo _curMag AND!(_x select 2)) then{_bulletCount=_bulletCount+(_x select 1);player removeMagazine _curMag;};}forEach _magInfo;if(_bulletCount isEqualTo 0) exitWith{};_maxBulletCountPerMag=getNumber(configfile>>"CfgMagazines">>_curMag>>"count");_fillMags=true;while{_fillMags}do {if(_bulletCount>_maxBulletCountPerMag) then {_bulletCount=_bulletCount-_maxBulletCountPerMag;
player addMagazine[_curMag,_maxBulletCountPerMag];}else{player addMagazine[_curMag,_bulletCount];_fillMags=false;};};a3s_inAction=false;["<t color='#A3FB26'>I have recombined my magazines</t>"]call A3SClient_fnc_addToFeed;}else{["<t color='#A3FB26'>I am recombining my magazines with a speedloader...</t>"]call A3SClient_fnc_addToFeed;player playmove"AinvPknlMstpSlayWrflDnon";uisleep 2;a3s_inAction=false;_magInfo=magazinesAmmoFull player;_curMag=currentMagazine player;_bulletCount=0;{if((_x select 0) isEqualTo _curMag AND!(_x select 2)) then{_bulletCount=_bulletCount+(_x select 1);player removeMagazine _curMag;};}forEach _magInfo;if(_bulletCount isEqualTo 0) exitWith{};_maxBulletCountPerMag=getNumber(configfile>>"CfgMagazines">>_curMag>>"count");_fillMags=true;while{_fillMags}do {if(_bulletCount>_maxBulletCountPerMag) then {_bulletCount=_bulletCount-_maxBulletCountPerMag;player addMagazine[_curMag,_maxBulletCountPerMag];}else{player addMagazine[_curMag,_bulletCount];_fillMags=false;};};a3s_inAction=false;["<t color='#A3FB26'>I have recombined my magazines</t>"]call A3SClient_fnc_addToFeed;};};true
}