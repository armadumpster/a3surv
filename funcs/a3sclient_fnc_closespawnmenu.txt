{
	private _fnc_scriptNameParent = if (isNil '_fnc_scriptName') then {'A3SClient_fnc_CloseSpawnMenu'} else {_fnc_scriptName};
	private _fnc_scriptName = 'A3SClient_fnc_CloseSpawnMenu';
	scriptName _fnc_scriptName;

#line 1 "A3S_client\bin\scripts\spawnmenu\fn_CloseSpawnMenu.sqf [A3SClient_fnc_CloseSpawnMenu]"

scriptName"fn_CloseSpawnMenu";if(!isNil"fuckmewhydoesthisrunmultipletimes") exitWith{};fuckmewhydoesthisrunmultipletimes=1;if(vest player isEqualTo"V_PlateCarrier1_rgr") exitWith{[[false],player,2]remoteExecCall["A3SServer_fnc_savePlayerToDatabasePatrial",2];uisleep 1;endMission"BUGGEDDATA";};call A3SClient_fnc_system_eventhandler;waitUntil{!(isNull(findDisplay 46))};(findDisplay 46) displayAddEventHandler["KeyDown","_this call A3SClient_fnc_keyHandler_Down"];(findDisplay 46) displayAddEventHandler["KeyUp","_this call A3SClient_fnc_keyHandler_Up"];a3s_hungerArrow=a3s_hunger;a3s_thirstArrow=a3s_thirst;a3s_bloodArrow=round((1-(damage player))*100);a3s_ClientLastTemperatureUpdateAt=diag_tickTime;a3s_ClientLastScreenUpdate=diag_tickTime;a3s_ClientLastHealUpdate=diag_tickTime;a3s_ClientLastFeedUpdate=diag_tickTime;a3s_ClientTimeUpdate=diag_tickTime;[]spawn A3SClient_fnc_system_player_stats_update_thread;[]spawn A3SClient_fnc_system_radiation_thread;((findDisplay 999) displayCtrl 40) ctrlEnable false;((findDisplay 999) displayCtrl 50) ctrlEnable false;((findDisplay 999) displayCtrl 60) ctrlEnable false;closeDialog 0;12000 cutRsc["spawnMenuFadeOut","PLAIN"];3 fadeSound 0;3 fadeMusic 0;uisleep 3;_damage=(damage player);a3s_grayScreenEffect ppEffectAdjust[1,1-((damage player)*0.6),0,0,0,0,0,1,1,1,1-((_damage)*1),0.299+((_damage)*(0.701)),0.587+((_damage)*(0.413)),0.114+((_damage)*(0.886)),0];a3s_grayScreenEffect ppEffectCommit 2;if(_damage>0.2) then{a3s_lowblood ppEffectAdjust[(_damage*0.61)];a3s_lowblood ppEffectCommit 2;}else{a3s_lowblood ppEffectAdjust[0];a3s_lowblood ppEffectCommit 2;};INTRO_CAM cameraEffect["TERMINATE","BACK"];camDestroy INTRO_CAM;uisleep 1;player addRating 99999999;player switchMove"";if(a3s_newSpawn) then{player addItem"A3S_Item_Bandage";player addItem"A3S_Item_Bandage";player addItem"chemlight_red";player addItem"hgun_flashlight_Sam_F";
player addItem"A3S_Item_BakedBeans";player addItem"A3S_Item_Canteen_Purified";};[player,a3s_local_skin]remoteExecCall["setFace"];player setPosATL a3s_pos;player setDir a3s_dir;[[player],{(_this select 0) hideObjectGlobal false}]remoteExecCall["BIS_FNC_SPAWN",2];3 fadeSound 1;1 fadeMusic 0.5;player setVariable["isPlayer",true,true];player setVariable["profileNameSteam",profileNameSteam,true];uisleep 3;_locationName=(position player) call A3SClient_fnc_displayLocation;[worldName,"11.06.2017",_locationName]spawn BIS_fnc_infoText;["<t color='#ffff00'><br/><br/>[PRESS F1 FOR A HELP MENU]</t>"]call A3SClient_fnc_addToFeed;player allowDamage true;player enableStamina false;player setCustomAimCoef 1.8;player setUnitRecoilCoefficient 3.4;showChat true;if(difficulty isEqualTo 3) then{1 enableChannel false;};a3s_inGame=true;if(a3s_newSpawn) then{[]call A3SClient_fnc_savePlayerData;if(a3s_inCombat) then{a3s_inCombat=false;[6]call A3SClient_fnc_savePlayerDataPatrial;};};uisleep 3;groupMutants=createGroup civilian;[]spawn A3SClient_fnc_zombieSpawnerClient;player addMPEventHandler["MPHit",{diag_log format["%1: %2 recieved %4 damage from unit %3",a3s_sv_logPrefix,name(_this select 0),name(_this select 1),_this select 2];}];player addMPEventHandler["MPKilled",{diag_log format["%1: %2 has been killed by %3",a3s_sv_logPrefix,name(_this select 0),name(_this select 1)];}];a3s_actions=[player addAction[localize"str_a3_gear1",{player action["Gear",cursorTarget];},nil,1.5,true,true,"","!isNull cursortarget AND (player distance cursortarget) < 3 AND (vehicle player isEqualTo player) AND (!(isNil{cursortarget getVariable ""unconscious""}) OR animationState cursortarget isEqualTo ""acts_aidlpsitmstpssurwnondnon_loop"")"]];[player,"Search through container","crate","_this distance cursortarget < 3 && cursortarget getVariable ['IsLocked',''] isEqualTo -1",{private _box=cursortarget;_box setVariable["IsLocked",0];player say3D"a3s_action_plastic";player action["GEAR",_box];},[],8,false]call A3SClient_fnc_addHoldAction;
}