{
	private _fnc_scriptNameParent = if (isNil '_fnc_scriptName') then {'A3SClient_fnc_upgrage_vehicle'} else {_fnc_scriptName};
	private _fnc_scriptName = 'A3SClient_fnc_upgrage_vehicle';
	scriptName _fnc_scriptName;

#line 1 "A3S_client\bin\scripts\interaction\vinteraction\fn_upgrage_vehicle.sqf [A3SClient_fnc_upgrage_vehicle]"

scriptName"fn_upgrage_vehicle";if(!a3s_Alive) exitWith{};if(a3s_inAction) exitWith{};_vehicle=a3s_cursorTarget;_type=param[0,-1,[0]];_vehicles=["KI_Car_Gurkha_rpv_Cargo_Upgrade","KI_Car_Gurkha_rpv"];if!((typeOf _vehicle) in _vehicles) exitwith{};_itemsPlayer=(vestItems player)+(backpackITems player)+(uniformItems player);if!("A3S_Item_Toolbox"in(_itemsPlayer)) exitwith{["<t color='#AB0E00'>I need a toolbox...</t>"]call A3SClient_fnc_addToFeed;};if!("A3S_Item_Scrapmetal"in(_itemsPlayer)) exitwith{["<t color='#AB0E00'>I need some scrapmetal...</t>"]call A3SClient_fnc_addToFeed;};if!(count crew _vehicle isEqualTo 0) exitwith{["<t color='#AB0E00'>The vehicle need to be empty...</t>"]call A3SClient_fnc_addToFeed;};closedialog 0;a3s_inAction=true;if(currentWeapon player!="") then{["<t color='#ffff00'>I will put my weapon back</t>"]call A3SClient_fnc_addToFeed;player action["switchWeapon",player,player,100];uisleep 3;};["<t color='#ffff00'>Starting to upgrade the vehicle...</t>"]call A3SClient_fnc_addToFeed;
_progress=0.01;_exitWith=false;for"_i"from 0 to 1 step 0 do{if(animationState player!="Acts_carFixingWheel") then{player playMoveNow"Acts_carFixingWheel";};uisleep 1.4;_progress=_progress+0.1;if(!a3s_Alive) exitWith{_exitWith=true;};if(player!=vehicle player) exitWith{_exitWith=true;};if(player distance _vehicle>4) exitWith{_exitWith=true;};if!(count crew _vehicle isEqualTo 0) exitwith{["<t color='#AB0E00'>The vehicle need to be empty...</t>"]call A3SClient_fnc_addToFeed;_exitWith=true;};if!("A3S_Item_Scrapmetal"in(_itemsPlayer)) exitwith{["<t color='#AB0E00'>I need some scrapmetal...</t>"]call A3SClient_fnc_addToFeed;_exitWith=true;};if(_progress>=1) exitWith{};};a3s_inAction=false;player playActionNow"stop";if(_exitWith) exitWith{};player removeItem"A3S_Item_Scrapmetal";if(_type isEqualTo 0) then{[_vehicle,0]remoteExec["A3SServer_fnc_UpgradeVehicle",2];["<t color='#A3FB26'>Cargo upgrade successful...</t>"]call A3SClient_fnc_addToFeed;}else{[_vehicle,1]remoteExec["A3SServer_fnc_UpgradeVehicle",2];["<t color='#A3FB26'>Reinforce upgrade successful...</t>"]call A3SClient_fnc_addToFeed;};
}