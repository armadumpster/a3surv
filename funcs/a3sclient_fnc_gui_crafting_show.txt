{
	private _fnc_scriptNameParent = if (isNil '_fnc_scriptName') then {'A3SClient_fnc_gui_crafting_show'} else {_fnc_scriptName};
	private _fnc_scriptName = 'A3SClient_fnc_gui_crafting_show';
	scriptName _fnc_scriptName;

#line 1 "A3S_client\bin\scripts\crafting\fn_gui_crafting_show.sqf [A3SClient_fnc_gui_crafting_show]"

scriptName"fn_gui_crafting_show";private["_recipeClassName","_recipeConfig","_recipeName","_pictureItemClassName","_pictureItemConfig","_recipePicture","_canCraftItem","_possibleCraftQuantity","_equippedMagazines","_components","_returnedItems","_tools","_dialog","_description","_componentQuantity","_componentItemClassName","_componentItemName","_equippedComponentQuantity","_toolItemClassName","_toolItemName","_equippedToolQuantity","_interactionModelGroupClassName","_interactionModelGroupConfig","_interactionModelGroupName","_interactionModelGroupModels","_foundObject","_i","_listBoxIndex"];_recipeClassName=_this;_recipeConfig=missionConfigFile>>"CfgCraftingRecipes">>_recipeClassName;_recipeName=getText(_recipeConfig>>"name");_pictureItemClassName=getText(_recipeConfig>>"pictureItem");_configName=_pictureItemClassName call A3SClient_fnc_util_gear_getConfigNameByClassName;_pictureItemConfig=configFile>>_configName>>_pictureItemClassName;_blueprint=getText(_recipeConfig>>"blueprint");if(_blueprint isEqualTo"") then{_recipePicture=getText(_pictureItemConfig>>"picture");}else{_recipePicture=_blueprint;};_canCraftItem=true;_possibleCraftQuantity=99999;_equippedItems=items player;_equippedMagazines=magazines player;_equippedMagazines append _equippedItems;_components=getArray(_recipeConfig>>"components");_returnedItems=getArray(_recipeConfig>>"returnedItems");_tools=getArray(_recipeConfig>>"tools");uiNameSpace setVariable["RscCraftItemRecipeClassName",_recipeClassName];_dialog=uiNameSpace getVariable["RscCraftItemDialog",displayNull];_tool1Outline=_dialog displayCtrl 5018;_tool2Outline=_dialog displayCtrl 5019;_tool3Outline=_dialog displayCtrl 5020;_tool4Outline=_dialog displayCtrl 5021;_tool5Outline=_dialog displayCtrl 5022;_nearby1Outline=_dialog displayCtrl 5023;_nearby2Outline=_dialog displayCtrl 5024;_nearby3Outline=_dialog displayCtrl 5025;_tool1Outline ctrlShow false;_tool2Outline ctrlShow false;_tool3Outline ctrlShow false;_tool4Outline ctrlShow false;_tool5Outline ctrlShow false;_nearby1Outline ctrlShow false;_nearby2Outline ctrlShow false;_nearby3Outline ctrlShow false;_RecipeNameDialog=_dialog displayCtrl 6003;_ItemNameDialog=_dialog displayCtrl 5005;_ItemWeightDialog=_dialog displayCtrl 5006;_RecipeName=format["<t size='1.2' font='CrayonHand' align='left'>%1</t>",_recipeName];_ItemClassname=(_returnedItems select 0)select 1;_ItemConfig=configFile>>_configName>>_ItemClassname;_ItemDisplayName=getText(_ItemConfig>>"displayName");_ItemWeight=(getNumber(_ItemConfig>>"mass"))/10;_kg="kg";if(_ItemWeight<1) then{_ItemWeight=_ItemWeight*1000;_kg="g";};_ItemDisplayName=format["<t size='0.8' font='CrayonHand' align='left'>%1</t>",_ItemDisplayName];_ItemWeight=format["<t size='0.8' font='CrayonHand' align='left'>%1 %2</t>",_ItemWeight,_kg];_description="";{_componentQuantity=_x select 0;_componentItemClassName=_x select 1;_componentItemName=getText(configFile>>"CfgMagazines">>_componentItemClassName>>"displayName");_equippedComponentQuantity={_x isEqualTo _componentItemClassName}count _equippedMagazines;_description=_description+format["<t size='1.1' shadow='0' font='CrayonHand' align='left' color='%1'>%2</t>","#4f4f4f",_componentItemName];_possibleCraftQuantity=_possibleCraftQuantity min(floor(_equippedComponentQuantity/_componentQuantity));if(_equippedComponentQuantity<_componentQuantity) then {_canCraftItem=false;_description=_description+format["<t size='1.0' shadow='2' font='CrayonHand' align='right' color='%1'>%2/%3</t>","#D90C01",_equippedComponentQuantity,_componentQuantity];
}else {_description=_description+format["<t size='1.0' shadow='2' font='CrayonHand' align='right' color='%1'>%2/%3</t>","#A3FB26",_equippedComponentQuantity,_componentQuantity];};_description=_description+"<br/>";}forEach _components;{_toolItemClassName=_x;_equippedToolQuantity={_x isEqualTo _toolItemClassName}count _equippedMagazines;if("A3S_Item_Hatchet"isEqualTo _x) then{_tool1Outline ctrlShow true;};if("A3S_Item_CanOpener"isEqualTo _x) then{_tool2Outline ctrlShow true;};if("A3S_Item_Knife"isEqualTo _x) then{_tool3Outline ctrlShow true;};if("A3S_Item_Toolbox"isEqualTo _x) then{_tool4Outline ctrlShow true;};if("A3S_Item_CookingPot"isEqualTo _x) then{_tool5Outline ctrlShow true;};if(_equippedToolQuantity isEqualTo 0) then {_canCraftItem=false;};}forEach _tools;if(getNumber(_recipeConfig>>"requiresTable") isEqualTo 1) then{_nearby1Outline ctrlShow true;if!([ASLtoAGL(getPosASL player),10,["a3s_basebuilding_workbench.p3d"]]call A3SClient_fnc_util_model_isNearby) then {_canCraftItem=false;};};if(getNumber(_recipeConfig>>"requiresWater") isEqualTo 1) then{_nearby2Outline ctrlShow true;_interactionModelGroupClassName=getText(_recipeConfig>>"requiredInteractionModelGroup");if!(_interactionModelGroupClassName isEqualTo"") then{_interactionModelGroupConfig=missionConfigFile>>"CfgInteractionModels">>_interactionModelGroupClassName;_interactionModelGroupModels=getArray(_interactionModelGroupConfig>>"models");if!([ASLtoAGL(getPosASL player),5,_interactionModelGroupModels]call A3SClient_fnc_util_model_isNearby) then {_canCraftItem=false;};}else{if!(surfaceIsWater getPosATL player) then{_canCraftItem=false;};};};if(getNumber(_recipeConfig>>"requiresFire") isEqualTo 1) then{_nearby3Outline ctrlShow true;if!([player,5]call A3SClient_fnc_util_world_isFireInRange) then {_canCraftItem=false;};};if(getNumber(_recipeConfig>>"spawnOnTheGround") isEqualTo 0) then{if!([_components,_returnedItems]call A3SClient_fnc_util_inventory_canExchangeItems) then {_canCraftItem=false;_description=_description+format["<br/><t size='0.9' shadow='0' font='CrayonHand' align='left' color='%1'>%2</t>","#D90C01","Your inventory is full."];};};if(_canCraftItem) then{switch(_possibleCraftQuantity) do {case 1:{_description=_description+format["<br/><t size='0.8' shadow='0' font='CrayonHand' align='left' color='%1'>%2</t>","#4f4f4f","You can craft this item once."];};case 99999:{_description=_description+format["<br/><t size='0.8' shadow='0' font='CrayonHand' align='left' color='%1'>%2</t>","#4f4f4f","You can craft this item whenever you like."];_possibleCraftQuantity=10;};default {_description=_description+format["<br/><t size='0.8' shadow='0' font='CrayonHand' align='left' color='%1'>%2</t>","#4f4f4f",format["You can craft this item %1 times.",_possibleCraftQuantity]];};};if(_possibleCraftQuantity isEqualTo 1) then{(_dialog displayCtrl 5002) ctrlShow false;}else{lbClear 5002;(_dialog displayCtrl 5002) ctrlShow true;};(_dialog displayCtrl 5001) ctrlShow true;(_dialog displayCtrl 8001) ctrlEnable true;for"_i"from 1 to _possibleCraftQuantity do {_listBoxIndex=lbAdd[5002,str(_i)];lbSetValue[5002,_listBoxIndex,_i];};lbSetCurSel[5002,0];}else{(_dialog displayCtrl 8001) ctrlEnable false;(_dialog displayCtrl 5001) ctrlShow false;(_dialog displayCtrl 5002) ctrlShow false;};(_dialog displayCtrl 5000) ctrlSetText _recipePicture;(_dialog displayCtrl 5003) ctrlSetStructuredText parseText _description;_RecipeNameDialog ctrlSetStructuredText parseText _RecipeName;_ItemNameDialog ctrlSetStructuredText parseText _ItemDisplayName;_ItemWeightDialog ctrlSetStructuredText parseText _ItemWeight;true
}